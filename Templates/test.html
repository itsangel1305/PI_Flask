{% extends "plantilla.html" %}

{% block body %}
<div class="container">
    <h1>Formulario de Salud Mental</h1>
    <form id="formulario">
        <label for="nombre">Nombre Completo</label>
        <input type="text" id="nombre" name="nombre" required>
        <span class="error-message" id="error-nombre">Solo se permiten letras.</span>

        <label for="email">Correo Electrónico</label>
        <input type="email" id="email" name="email" required>
        <span class="error-message" id="error-email">El correo debe contener '@' y terminar en '.com'.</span>

        <label for="telefono">Teléfono Celular</label>
        <input type="tel" id="telefono" name="telefono" required maxlength="10">
        <span class="error-message" id="error-telefono">Solo se permiten 10 números.</span>
        <div class="character-count" id="contador-telefono">0/10</div>

        <label for="pregunta1">¿Con qué frecuencia sientes que no puedes controlar tus preocupaciones?</label>
        <input type="text" id="pregunta1" name="pregunta1">

        <label for="pregunta2">¿Te resulta difícil relajarte?</label>
        <input type="text" id="pregunta2" name="pregunta2">

        <label for="pregunta3">¿Has experimentado cambios significativos en tu apetito o peso recientemente?</label>
        <input type="text" id="pregunta3" name="pregunta3">

        <label for="pregunta4">¿Te sientes triste o deprimido la mayor parte del tiempo?</label>
        <input type="text" id="pregunta4" name="pregunta4">

        <label for="pregunta5">¿Evitas situaciones o lugares porque te generan ansiedad?</label>
        <input type="text" id="pregunta5" name="pregunta5">

        <label for="pregunta6">¿Tienes problemas para conciliar el sueño o mantenerte dormido?</label>
        <input type="text" id="pregunta6" name="pregunta6">

        <label for="pregunta7">¿Te has sentido irritado o impaciente sin razón aparente?</label>
        <input type="text" id="pregunta7" name="pregunta7">

        <label for="pregunta8">¿Tienes pensamientos intrusivos que no puedes controlar?</label>
        <input type="text" id="pregunta8" name="pregunta8">

        <label for="pregunta9">¿Te cuesta concentrarte en tus tareas diarias?</label>
        <input type="text" id="pregunta9" name="pregunta9">

        <label for="pregunta10">¿Has considerado buscar ayuda profesional para tu salud mental?</label>
        <input type="text" id="pregunta10" name="pregunta10">

        <button type="submit">Enviar</button>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const nombreInput = document.getElementById('nombre');
        const emailInput = document.getElementById('email');
        const telefonoInput = document.getElementById('telefono');
        const errorNombre = document.getElementById('error-nombre');
        const errorEmail = document.getElementById('error-email');
        const errorTelefono = document.getElementById('error-telefono');
        const contadorTelefono = document.getElementById('contador-telefono');
        const formulario = document.getElementById('formulario');

        
        nombreInput.addEventListener('input', function () {
            const nombreValue = nombreInput.value;
            const regexNombre = /^[A-Za-záéíóúÁÉÍÓÚñÑ\s]+$/; // Solo letras y espacios

            if (!regexNombre.test(nombreValue)) {
                nombreInput.classList.add('invalid');
                errorNombre.style.display = 'block';
            } else {
                nombreInput.classList.remove('invalid');
                nombreInput.classList.add('valid');
                errorNombre.style.display = 'none';
            }
        });

        
        emailInput.addEventListener('input', function () {
            const emailValue = emailInput.value;
            const regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Formato de correo

            if (!regexEmail.test(emailValue) || !emailValue.endsWith('.com')) {
                emailInput.classList.add('invalid');
                errorEmail.style.display = 'block';
            } else {
                emailInput.classList.remove('invalid');
                emailInput.classList.add('valid');
                errorEmail.style.display = 'none';
            }
        });

        
        telefonoInput.addEventListener('input', function () {
            const telefonoValue = telefonoInput.value;
            const regexTelefono = /^[0-9]*$/; // Solo números

            if (!regexTelefono.test(telefonoValue) || telefonoValue.length !== 10) {
                telefonoInput.classList.add('invalid');
                errorTelefono.style.display = 'block';
            } else {
                telefonoInput.classList.remove('invalid');
                telefonoInput.classList.add('valid');
                errorTelefono.style.display = 'none';
            }

            contadorTelefono.textContent = `${telefonoValue.length}/10`;
        });

        
        formulario.addEventListener('submit', function (event) {
            if (nombreInput.classList.contains('invalid') || 
                emailInput.classList.contains('invalid') || 
                telefonoInput.classList.contains('invalid')) {
                event.preventDefault();
                alert('Por favor, corrija los errores antes de enviar el formulario.');
            }
        });
    });
</script>
{% endblock %}
