{% extends "plantilla.html" %}

{% block body %}
<div class="container mt-5 mb-5 p-3 border-opacity-75 rounded-4" style="background-color: #ffffff;">
    <h1 class="text-center mb-4" style="color: #2c387e;">Formulario de Salud Mental</h1>
    <form id="formulario">
        <div class="mb-3">
            <label for="nombre" class="form-label">Nombre Completo</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="nombre" name="nombre" required>
            <span class="error-message" id="error-nombre" style="color: #ff0000;">Solo se permiten letras.</span>
        </div>
        
        <div class="mb-3">
            <label for="email" class="form-label">Correo Electrónico</label>
            <input type="email" class="form-control border-primary border-opacity-75 rounded" id="email" name="email" required>
            <span class="error-message" id="error-email" style="color: #ff0000;">El correo debe contener '@' y terminar en '.com'.</span>
        </div>

        <div class="mb-3">
            <label for="telefono" class="form-label">Teléfono Celular</label>
            <input type="tel" class="form-control border-primary border-opacity-75 rounded" id="telefono" name="telefono" required maxlength="10">
            <span class="error-message" id="error-telefono" style="color: #ff0000;">Solo se permiten 10 números.</span>
            <div class="character-count" id="contador-telefono">0/10</div>
        </div>

        <div class="mb-3">
            <label for="pregunta1" class="form-label">¿Con qué frecuencia sientes que no puedes controlar tus preocupaciones?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta1" name="pregunta1">
        </div>

        <div class="mb-3">
            <label for="pregunta2" class="form-label">¿Te resulta difícil relajarte?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta2" name="pregunta2">
        </div>

        <div class="mb-3">
            <label for="pregunta3" class="form-label">¿Has experimentado cambios significativos en tu apetito o peso recientemente?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta3" name="pregunta3">
        </div>

        <div class="mb-3">
            <label for="pregunta4" class="form-label">¿Te sientes triste o deprimido la mayor parte del tiempo?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta4" name="pregunta4">
        </div>

        <div class="mb-3">
            <label for="pregunta5" class="form-label">¿Evitas situaciones o lugares porque te generan ansiedad?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta5" name="pregunta5">
        </div>

        <div class="mb-3">
            <label for="pregunta6" class="form-label">¿Tienes problemas para conciliar el sueño o mantenerte dormido?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta6" name="pregunta6">
        </div>

        <div class="mb-3">
            <label for="pregunta7" class="form-label">¿Te has sentido irritado o impaciente sin razón aparente?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta7" name="pregunta7">
        </div>

        <div class="mb-3">
            <label for="pregunta8" class="form-label">¿Tienes pensamientos intrusivos que no puedes controlar?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta8" name="pregunta8">
        </div>

        <div class="mb-3">
            <label for="pregunta9" class="form-label">¿Te cuesta concentrarte en tus tareas diarias?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta9" name="pregunta9">
        </div>

        <div class="mb-3">
            <label for="pregunta10" class="form-label">¿Has considerado buscar ayuda profesional para tu salud mental?</label>
            <input type="text" class="form-control border-primary border-opacity-75 rounded" id="pregunta10" name="pregunta10">
        </div>

        <div class="text-center">
            <button type="submit" class="btn text-white" style="background-color: #2c387e;">Enviar</button>
        </div>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const nombreInput = document.getElementById('nombre');
        const emailInput = document.getElementById('email');
        const telefonoInput = document.getElementById('telefono');
        const errorNombre = document.getElementById('error-nombre');
        const errorEmail = document.getElementById('error-email');
        const errorTelefono = document.getElementById('error-telefono');
        const contadorTelefono = document.getElementById('contador-telefono');
        const formulario = document.getElementById('formulario');

        nombreInput.addEventListener('input', function () {
            const nombreValue = nombreInput.value;
            const regexNombre = /^[A-Za-záéíóúÁÉÍÓÚñÑ\s]+$/;

            if (!regexNombre.test(nombreValue)) {
                nombreInput.classList.add('invalid');
                errorNombre.style.display = 'block';
            } else {
                nombreInput.classList.remove('invalid');
                nombreInput.classList.add('valid');
                errorNombre.style.display = 'none';
            }
        });

        emailInput.addEventListener('input', function () {
            const emailValue = emailInput.value;
            const regexEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (!regexEmail.test(emailValue) || !emailValue.endsWith('.com')) {
                emailInput.classList.add('invalid');
                errorEmail.style.display = 'block';
            } else {
                emailInput.classList.remove('invalid');
                emailInput.classList.add('valid');
                errorEmail.style.display = 'none';
            }
        });

        telefonoInput.addEventListener('input', function () {
            const telefonoValue = telefonoInput.value;
            const regexTelefono = /^[0-9]*$/;

            if (!regexTelefono.test(telefonoValue) || telefonoValue.length !== 10) {
                telefonoInput.classList.add('invalid');
                errorTelefono.style.display = 'block';
            } else {
                telefonoInput.classList.remove('invalid');
                telefonoInput.classList.add('valid');
                errorTelefono.style.display = 'none';
            }

            contadorTelefono.textContent = `${telefonoValue.length}/10`;
        });

        formulario.addEventListener('submit', function (event) {
            if (nombreInput.classList.contains('invalid') || 
                emailInput.classList.contains('invalid') || 
                telefonoInput.classList.contains('invalid')) {
                event.preventDefault();
                alert('Por favor, corrija los errores antes de enviar el formulario.');
            }
        });
    });
</script>
{% endblock %}
